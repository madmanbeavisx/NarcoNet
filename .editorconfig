# Inherit nothing from parents
root = true

# =========================
# Global defaults
# =========================
[*]
charset = utf-8
end_of_line = crlf
insert_final_newline = true
trim_trailing_whitespace = true

# Line endings by filetype
[*.{sh,bash,zsh,yml,yaml,json}]
end_of_line = lf

# Markdown: keep two-space line breaks
[*.md]
end_of_line = lf
trim_trailing_whitespace = false

# =========================
# Analyzer severity defaults
# =========================
[*.{cs,vb}]
dotnet_analyzer_diagnostic.category-Style.severity = warning
dotnet_analyzer_diagnostic.category-Simplification.severity = warning
dotnet_analyzer_diagnostic.category-Documentation.severity = suggestion
dotnet_analyzer_diagnostic.category-Design.severity = warning
dotnet_analyzer_diagnostic.category-Maintainability.severity = warning
dotnet_analyzer_diagnostic.category-Usage.severity = warning
dotnet_analyzer_diagnostic.ignore_generated_code = true

# Common Roslyn diagnostics
dotnet_diagnostic.IDE0005.severity = warning # Remove unnecessary usings
dotnet_diagnostic.IDE0060.severity = warning # Remove unused parameter
dotnet_diagnostic.IDE0058.severity = warning # Discard unused expression value
dotnet_diagnostic.IDE0063.severity = warning # Prefer 'using' declaration
dotnet_diagnostic.IDE0044.severity = warning # Make field readonly
dotnet_diagnostic.IDE0251.severity = warning # Use nameof for argument expressions
dotnet_diagnostic.IDE0300.severity = warning # Prefer collection expressions
dotnet_diagnostic.IDE0039.severity = warning # Use local function
dotnet_diagnostic.IDE0040.severity = suggestion # Add accessibility modifiers

# Nullable culture
dotnet_diagnostic.CS8618.severity = warning # Non-nullable uninitialized
dotnet_diagnostic.CS8602.severity = warning # Possible null dereference
dotnet_diagnostic.CS1591.severity = none # Missing XML docs

# =========================
# C# files
# =========================
[*.cs]

#### Core EditorConfig Options ####
indent_style = space
indent_size = 2
tab_width = 2

#### .NET Code Actions ####
dotnet_hide_advanced_members = false
dotnet_member_insertion_location = with_other_members_of_the_same_kind
dotnet_property_generation_behavior = prefer_throwing_properties
dotnet_search_reference_assemblies = true

#### .NET Coding Conventions ####
# Organize usings
dotnet_remove_unnecessary_usings = true
dotnet_separate_import_directive_groups = true
dotnet_sort_system_directives_first = true
file_header_template = unset

# this./Me. qualification
dotnet_style_qualification_for_event = false
dotnet_style_qualification_for_field = false
dotnet_style_qualification_for_method = false
dotnet_style_qualification_for_property = false

# Language keywords vs BCL types
dotnet_style_predefined_type_for_locals_parameters_members = true
dotnet_style_predefined_type_for_member_access = true

# Parentheses
dotnet_style_parentheses_in_arithmetic_binary_operators = always_for_clarity
dotnet_style_parentheses_in_other_binary_operators = always_for_clarity
dotnet_style_parentheses_in_relational_binary_operators = always_for_clarity
dotnet_style_parentheses_in_other_operators = never_if_unnecessary

# Modifiers
dotnet_style_require_accessibility_modifiers = for_non_interface_members

# Expression-level
dotnet_prefer_system_hash_code = true
dotnet_style_coalesce_expression = true
dotnet_style_collection_initializer = true
dotnet_style_explicit_tuple_names = true
dotnet_style_namespace_match_folder = true
dotnet_style_null_propagation = true
dotnet_style_object_initializer = true
dotnet_style_operator_placement_when_wrapping = beginning_of_line
dotnet_style_prefer_auto_properties = true
dotnet_style_prefer_collection_expression = when_types_loosely_match
dotnet_style_prefer_compound_assignment = true
dotnet_style_prefer_conditional_expression_over_assignment = true
dotnet_style_prefer_conditional_expression_over_return = true
dotnet_style_prefer_foreach_explicit_cast_in_source = when_strongly_typed
dotnet_style_prefer_inferred_anonymous_type_member_names = true
dotnet_style_prefer_inferred_tuple_names = true
dotnet_style_prefer_is_null_check_over_reference_equality_method = true
dotnet_style_prefer_simplified_boolean_expressions = true
dotnet_style_prefer_simplified_interpolation = true

# Fields/parameters
dotnet_style_readonly_field = true
dotnet_code_quality_unused_parameters = all

# Suppressions
dotnet_remove_unnecessary_suppression_exclusions = none

# Extra newline freedoms (flip to false if diffs get noisy)
dotnet_style_allow_multiple_blank_lines_experimental = true
dotnet_style_allow_statement_immediately_after_block_experimental = true

#### C# Coding Conventions ####
# var usage
csharp_style_var_for_built_in_types = false
csharp_style_var_when_type_is_apparent = false
csharp_style_var_elsewhere = false

# Expression-bodied members
csharp_style_expression_bodied_accessors = true
csharp_style_expression_bodied_constructors = false
csharp_style_expression_bodied_indexers = true
csharp_style_expression_bodied_lambdas = true
csharp_style_expression_bodied_local_functions = false
csharp_style_expression_bodied_methods = false
csharp_style_expression_bodied_operators = false
csharp_style_expression_bodied_properties = true

# Pattern matching
csharp_style_pattern_matching_over_as_with_null_check = true
csharp_style_pattern_matching_over_is_with_cast_check = true
csharp_style_prefer_extended_property_pattern = true
csharp_style_prefer_not_pattern = true
csharp_style_prefer_pattern_matching = true
csharp_style_prefer_switch_express
